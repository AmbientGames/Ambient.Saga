<?xml version="1.0" encoding="utf-8"?>
<!--
    Example: Mid-Battle Dialogue Triggers
    Demonstrates how bosses react dynamically during combat with trait-based consequences
-->
<Characters xmlns="Ambient.Domain"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <Character RefName="DRAMATIC_BOSS" DisplayName="Lord Darkblade" Description="A powerful warlord who taunts and reacts during battle">
        <!-- Base stats -->
        <Stats Health="1.0" Stamina="1.0" Mana="1.0" Strength="0.20" Defense="0.15" Speed="0.10" Magic="0.12" Credits="500" />

        <!-- Starting equipment -->
        <Capabilities>
            <Equipment>
                <Entry EquipmentRef="Greatsword" Condition="1.0" />
                <Entry EquipmentRef="PlateArmor" Condition="1.0" />
            </Equipment>
            <Spells>
                <Entry SpellRef="Fireball" Condition="1.0" />
                <Entry SpellRef="LastStandExplosion" Condition="1.0" />
            </Spells>
            <Consumables>
                <Entry ConsumableRef="GreaterHealingPotion" Quantity="2" />
            </Consumables>
        </Capabilities>

        <!-- Traits -->
        <Traits>
            <Trait Name="BossFight" Value="1" />
            <Trait Name="Hostile" Value="1" />
            <Trait Name="TacticalRetreat" Value="30" />  <!-- Switch to Defensive at 30% HP -->
            <Trait Name="LastStand" Value="15" />        <!-- Desperate attack at 15% HP -->
        </Traits>

        <!-- Mid-Battle Dialogue Triggers -->
        <BattleDialogue>
            <!-- Battle Start: Opening taunt -->
            <Trigger Condition="TurnNumber" Value="1"
                     DialogueTreeRef="DRAMATIC_BOSS_BATTLE" StartNodeId="opening_taunt" OnceOnly="true" />

            <!-- 75% HP: First blood -->
            <Trigger Condition="HealthBelow" Value="0.75"
                     DialogueTreeRef="DRAMATIC_BOSS_BATTLE" StartNodeId="first_blood" OnceOnly="true" />

            <!-- 50% HP: Shift tactics (goes berserk) -->
            <Trigger Condition="HealthBelow" Value="0.50"
                     DialogueTreeRef="DRAMATIC_BOSS_BATTLE" StartNodeId="berserk_mode" OnceOnly="true" />

            <!-- 30% HP: Tactical retreat (defensive stance) -->
            <Trigger Condition="HealthBelow" Value="0.30"
                     DialogueTreeRef="DRAMATIC_BOSS_BATTLE" StartNodeId="retreat_defensive" OnceOnly="true" />

            <!-- 15% HP: Last stand (desperate) -->
            <Trigger Condition="HealthBelow" Value="0.15"
                     DialogueTreeRef="DRAMATIC_BOSS_BATTLE" StartNodeId="last_stand" OnceOnly="true" />

            <!-- Player low HP: Mocking -->
            <Trigger Condition="PlayerHealthBelow" Value="0.25"
                     DialogueTreeRef="DRAMATIC_BOSS_BATTLE" StartNodeId="mock_player" OnceOnly="true" />

            <!-- On Defeat: Surrender option -->
            <Trigger Condition="OnDefeat" Value="0"
                     DialogueTreeRef="DRAMATIC_BOSS_BATTLE" StartNodeId="defeated" OnceOnly="true" />
        </BattleDialogue>
    </Character>

</Characters>
