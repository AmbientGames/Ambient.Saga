<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <AmbientSagaPackagePath>$(MSBuildThisFileDirectory)..\tools\</AmbientSagaPackagePath>
  </PropertyGroup>

  <!-- Copy NuGet Content (Schemas and Worlds) during build -->
  <Target Name="CopyAmbientSagaContent" AfterTargets="Build">
    <MakeDir Directories="$(OutputPath)Content\Schemas" />
    <MakeDir Directories="$(OutputPath)Content\Worlds" />
    <ItemGroup>
      <AmbientSagaSchemaFiles Include="$(AmbientSagaPackagePath)Content\Schemas\**\*.*" />
      <AmbientSagaWorldFiles Include="$(AmbientSagaPackagePath)Content\Worlds\**\*.*" />
    </ItemGroup>
    <Copy SourceFiles="@(AmbientSagaSchemaFiles)"
          DestinationFiles="@(AmbientSagaSchemaFiles->'$(OutputPath)Content\Schemas\%(RecursiveDir)%(Filename)%(Extension)')"
          SkipUnchangedFiles="true" />
    <Copy SourceFiles="@(AmbientSagaWorldFiles)"
          DestinationFiles="@(AmbientSagaWorldFiles->'$(OutputPath)Content\Worlds\%(RecursiveDir)%(Filename)%(Extension)')"
          SkipUnchangedFiles="true" />
  </Target>
</Project>
